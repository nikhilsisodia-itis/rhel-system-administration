# Using logrotate

## What is logrotate?

- Logrotate is a system utility that manages the automatic rotation, compression, and removal of log files. It helps to ensure that log files do not consume excessive disk space and remain manageable.
- It is commonly used to handle log files generated by various services and applications.
- Logrotate can be configured to rotate logs based on size, time, or other criteria, and it can also execute custom scripts before or after rotation.
- Logrotate is typically run as a scheduled task (e.g., via cron) to perform log rotation at regular intervals.
- The configuration files for logrotate are usually located in `/etc/logrotate.conf` and the `/etc/logrotate.d/` directory.
- Logrotate supports various options such as compression (e.g., gzip), retention policies (e.g., how many old logs to keep), and post-rotation actions (e.g., restarting services).

## Basic logrotate configuration

- Logrotate configuration files are typically located in `/etc/logrotate.conf` and the `/etc/logrotate.d/` directory.
- The main configuration file is `/etc/logrotate.conf`, which contains global settings and can include other configuration files.
- Individual service log rotation configurations are usually placed in the `/etc/logrotate.d/` directory.
- A basic logrotate configuration file consists of a set of directives that specify how to handle log files.
- Each log file or set of log files is defined in a block that starts with the log file path(s) followed by a set of options enclosed in curly braces `{}`.
- Common options include:
  - `rotate <number>`: Specifies the number of old log files to keep.
  - `size <size>`: Rotates the log file when it reaches a specified size (e.g., `100M` for 100 megabytes).
  - `daily`, `weekly`, `monthly`: Specifies the frequency of rotation.
  - `compress`: Compresses old log files using gzip.
  - `missingok`: Prevents errors if the log file is missing.
  - `notifempty`: Does not rotate the log file if it is empty.
  - `create <mode> <owner> <group>`: Creates a new log file with specified permissions and ownership after rotation.
  - `postrotate` and `endscript`: Defines a script to be executed after log rotation (e.g., to restart a service).
  