# Monitoring with top

## What is top?

- TOP is a command-line utility that provides a dynamic, real-time view of a running system.
- It displays system summary information and a list of tasks currently being managed by the Linux kernel.
- It is commonly used for monitoring system performance and resource usage.

## How to use top?

- `top` - Simply type `top` in the terminal to start the utility.
- `q` - Press `q` to quit the top interface.
- `h` - Press `h` to access the help menu for more commands and options.
- `k` - Press `k` to kill a process by entering its PID.
- `r` - Press `r` to renice a process by entering its PID and new priority.
- `M` - Press `M` to sort processes by memory usage.
- `P` - Press `P` to sort processes by CPU usage.
- `u` - Press `u` to filter processes by a specific user.
- `f` - Press `f` to add or remove fields from the display.

## How to get information about zombie processes?

- Zombie processes are processes that have completed execution but still have an entry in the process table.
- To identify zombie processes in `top`, look for processes with a status of `Z` in the `STAT` column.
- You can also use the command `ps aux | grep 'Z'` OR `ps aux | grep defunct` to list all zombie processes.
- To remove zombie processes, you typically need to terminate their parent process, as zombies are waiting for their parent to read their exit status.

## Exploring fields in TOP

### The top field

- Shows the current time.
- System uptime.
- Number of users logged in.
- Load averages for the past 1, 5, and 15 minutes.

### The Tasks field

- Displays the total number of tasks (processes) and their states (running, sleeping, stopped, zombie).

### The %Cpu field

- The `%Cpu` field in `top` displays the percentage of CPU usage.
- It is divided into several sub-fields:
  - `us` (user): Percentage of CPU time spent in user mode.
  - `sy` (system): Percentage of CPU time spent in kernel mode.
  - `ni` (nice): Percentage of CPU time spent on processes with a positive nice value.
  - `id` (idle): Percentage of CPU time spent idle.
  - `wa` (iowait): Percentage of CPU time spent waiting for I/O operations to complete.
  - `hi` (hardware interrupts): Percentage of CPU time spent handling hardware interrupts.
  - `si` (software interrupts): Percentage of CPU time spent handling software interrupts.
  - `st` (steal): Percentage of CPU time stolen from a virtual machine by the hypervisor.
- Monitoring these fields helps in understanding how the CPU resources are being utilized.

### The MiB Mem field

- The `MiB Mem` field in `top` displays memory usage in mebibytes (MiB).
- It is divided into several sub-fields:
  - `total`: Total physical memory available.
  - `used`: Amount of memory currently in use.
  - `free`: Amount of memory that is not being used.
  - `buff/cache`: Memory used for buffers and cache.
  - `available`: Estimated amount of memory available for starting new applications, without swapping.
- Monitoring these fields helps in understanding how memory resources are being utilized.

### The MiB Swap field

- The `MiB Swap` field in `top` displays swap space usage in mebibytes (MiB).
- It is divided into several sub-fields:
  - `total`: Total swap space available.
  - `used`: Amount of swap space currently in use.
  - `free`: Amount of swap space that is not being used.
  - `avail Mem`: Estimated amount of memory available for starting new applications, without swapping.
- Monitoring these fields helps in understanding how swap resources are being utilized.

## Kill a process in TOP

- Press k while in the top interface.
- Enter the PID (Process ID) of the process you want to kill.
- Press Enter.
- Optionally, enter the signal number (default is 15 for SIGTERM) and press Enter again.
