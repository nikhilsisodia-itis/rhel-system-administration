# Difference Between `su` and `sudo`

## Overview

- The `su` and `sudo` commands are both used to gain elevated privileges in Unix-like operating systems, but they operate in fundamentally different ways.
- While both commands allow users to obtain elevated privileges (root access), they function differently regarding authentication, security, and auditing.

## Key Differences

| Feature | `su` (Substitute User) | `sudo` (SuperUser DO) |
| :--- | :--- | :--- |
| **Full Name** | Substitute User / Switch User | SuperUser DO |
| **Authentication** | Requires the **Target User's** Password. | Requires the **Current User's** Password. |
| **Identity** | Changes the shell's active user ID (UID). You **become** root. | Executes a command **as** root, but you remain yourself. |
| **Auditing** | Difficult to track actions after the switch occurs. | Tracks every single command in `/var/log/secure` or `/var/log/auth.log`. |
| **Configuration** | None (Built-in mechanism). | Managed via `/etc/sudoers`. |

---

## üõ†Ô∏è Commands & Usage Comparison

### 1. How to Switch to Root (Get a Root Shell)

The goal is to get a terminal prompt that looks like `[root@server ~]#`.

1. **Using `su`:**

    ```bash
    su -
    ```

    - **Input:** You must type the **Root Password**.
    - **Result:** You are logged in as root indefinitely until you type `exit`.

1. **Using `sudo` (Recommended):**

    ```bash
    sudo -i
    ```

    - **Input:** You must type **Your Password**.
    - **Result:** You get a root shell with the root environment loaded. This is the modern best practice.

### 2. How to Run a Single Command as Root

The goal is to update the system or restart a service without staying logged in as root.

1. **Using `su`:**

    ```bash
    su -c 'dnf update -y'
    ```

    - **Input:** You must type the **Root Password**.
    - **Note:** Clunky and rarely used for single commands.

1. **Using `sudo` (Recommended):**

    ```bash
    sudo dnf update -y
    ```

    - **Input:** You must type **Your Password**.
    - **Note:** Fast, secure, and logs exactly what command was run.

### 3. How to Run a Command as Another User (Not Root)

The goal is to manage a specific application user, like `postgres` or `apache`.

1. **Using `su`:**

    ```bash
    su - postgres
    ```

    - **Action:** Switches your entire shell to the `postgres` user.

1. **Using `sudo`:**

    ```bash
    sudo -u postgres psql
    ```

    - **Action:** Runs the command `psql` as the user `postgres` without needing the postgres user's password.

### 4. Special `sudo` Commands

1. **Repeat Last Command:**

    ```bash
    sudo !!
    ```

    - **Purpose:** Repeats the last command you ran, but with `sudo`.
    - **Scenario:** You tried to run a command (e.g., `dnf update`) but forgot `sudo` and got a "Permission denied" error. Typing `sudo !!` runs that last command again with sudo privileges.
1. **Edit Sudo Configuration:**

    ```bash
    sudo visudo
    ```

    - **Purpose:** Opens the `/etc/sudoers` file in a safe editor.
    - **Importance:** **NEVER** edit `/etc/sudoers` with a standard text editor (like nano or vim) directly. `visudo` checks for syntax errors before saving. If you make a typo in this file, you can lock yourself out of the system!

---

## Best Practice (RHEL & Ubuntu)

- Always prefer `sudo` over `su`.
- It provides better accountability (logs), security (no shared passwords), and granularity (command restrictions).
