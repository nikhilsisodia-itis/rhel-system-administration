# Scheduling tasks with systmed timers

## What is systemd timers?

- Systemd timers are a way to schedule tasks (like scripts or commands) on RHEL systems, similar to cron jobs.
- They use two files: a service unit (what to run) and a timer unit (when to run it).
- Timers are managed by systemd, the same system that manages services on RHEL.
- Users can use timers for one-time or recurring tasks.
- Timers offer more flexible scheduling and logging than traditional cron.

## Common commands

- `systemctl list-timers`: Lists all active timers.
- `systemctl start <timer-name>.timer`: Starts a specific timer.
- `systemctl stop <timer-name>.timer`: Stops a specific timer.
- `systemctl enable <timer-name>.timer`: Enables a timer to start at boot.
- `systemctl disable <timer-name>.timer`: Disables a timer from starting at boot
- `systemctl status <timer-name>.timer`: Shows the status of a specific timer.

## Creating a systemd timer

- Create a service unit file (e.g., `/etc/systemd/system/backup.service`) to define the task:

  ```ini
  [Unit]
  Description=Run backup script

  [Service]
  Type=oneshot
  ExecStart=/path/to/your/backup-script.sh
  ```

- Create a timer unit file (e.g., `/etc/systemd/system/backup.timer`) to schedule the task:

  ```ini
  [Unit]
  Description=Run backup script daily
  [Timer]
  OnCalendar=daily
  Persistent=true
  [Install]
  WantedBy=timers.target
  ```

- Reload systemd to recognize the new files: `sudo systemctl daemon-reload`
- Start and enable the timer: `sudo systemctl start backup.timer` and `sudo systemctl enable backup.timer`
- Check the status of the timer: `sudo systemctl status backup.timer`
- View logs of the executed task: `journalctl -u backup.service`
- Adjust the `OnCalendar` value in the timer file to change the schedule (e.g., `hourly`, `weekly`, or specific times).
- To stop or disable the timer, use: `sudo systemctl stop backup.timer` and `sudo systemctl disable backup.timer`
